---
title: "FF Manual"
format:
  html:
    toc: true
    toc-location: left
    toc-title: "Contents"
---


This page is an attempt to bring together information about the Fiscal Futures Project in one place.
For me, it's difficult to understand the project because it feels so large and the information seems  scattered across many places (though maybe it isn't, really).


# Methodology
### All Funds Approach
- FF transforms the data from the Illinois Office of Comptroller (IOC) to provide accurate time-series data.
- FF adopts anÂ **All FundsÂ approach**, which tracks revenues and expenditures by the functions of Illinois State Government in order to address inconsistency from the *General Fund approach*
	- The concept of *General Fund* is used by the IOC and political discussion, but it is not consistent over time.
		- For example, money for a specific program may come from one fund in a given year, but the source may change to another fund in the next year.

>[!All funds by SAMS manual]-
>- **General Funds**: Those funds established to receive the major portion of tax revenues and to pay the regular operating and administrative expenses of most State agencies. 
	>>[!General Funds (15 ILCS 20/50-40)]- 
	>>Â "General funds" or "State general funds" means the General Revenue Fund, the Common School Fund, the General Revenue Common School Special Account Fund, the Education Assistance Fund, the Fund for the Advancement of Education, the Commitment to Human Services Fund, and the Budget Stabilization Fund.  
>- **Highway Funds**: Those funds established to receive and distribute special assessments related to transportation, such as Motor Fuel Tax, and to support the construction and maintenance of transportation facilities and activities of the State of Illinois. 
>- **Special State Funds**: Those funds designated in Section 5 of the Finance Act as special funds in the State Treasury and not elsewhere classified. They represent a segregation of accounts for specific purposes on a substantially perpetual basis. 
>- **Bond Financed Funds**: Those funds established to receive and administer the proceeds of various bond issues of the State. 
>- **Debt Service Funds**: Those funds established to finance and account for the payment of principal redemption and interest associated with the general obligation bond issues of the State.
>- **Federal Trust Funds**: Those funds established pursuant to grants and contracts between State agencies and the United States. The funds are administered for specific purposes established by the terms of the grants and contracts. 
>- **Revolving Funds**: Those funds established to finance and account for intra-governmental services. Appropriation of resources of these funds is dependent upon intra-governmental service requirements and appropriations of other State agencies. Revolving Fund resources are provided by expenditures of State agencies financed by the fund. 
>- **State Trust Funds**: Those funds established by statute or under statutory authority for specific purposes. 
>- **Other Trust Funds**: Those funds established to receive and account for resources for subsequent disbursement to a designated recipient. Escrow funds are an example of an Other Trust Fund.
>> In the FF dataset, `University Income` is the only fund for Other Trust Funds in FY2026

##### Inclusion / Exclusion Criteria
Most of appropriated funds[^1] are included and non-appropriated funds[^2] are excluded. However, there are some exceptions following criteria:
###### Inclusion
1. Non-appropriated funds collects a state-levied tax for state functions
2. Non-appropriated funds that supports a state function
	- Some non-appropriated funds support state functions such as education, social services, transportation, public facilities, regulation, natural resources, and law enforcement.
		- Generally, these are federal trust funds for a specified state project or purpose
		- Federal money are counted as revenue, it would be inconsistent if these funds would not included.
3. Non-appropriated funds collects a user fee that supports state functions 
	- e.g.) Illinois State Toll Highway Revenue Fund, which collects tolls and supports the maintenance of Illinois toll roads.

###### Exclusion
1. The funds that Illinois state solely collects for local taxing body
2. The funds that hold monies for individuals, not the state
	- e.g.) child support collection funds or employee pension own-contribution funds
3. The fund's expenditure or revenues have been counted elsewhere (i.e., avoid double-counting)
	- e.g.) Commercial consolidation fund distributes state benefit payments to individuals, service providers, and local governments by direct deposit. The revenues to this fund is included, but expenditures from this fund are not.

4. The fund holds designated user fees targeted for a specific purpose that is not a public function.
	- e.g.) fund 0098 collects fees from harness race entrants and pays them out to race winners.
5. The funds that are dead or lack clear information
	- These funds are generally appear to be very small.
	- Because we are projecting forward from the most recently completed fiscal year, we assumed that these funds would not be in the frame.

>[!comment]
>`in_ff == 0` include State trust fund, Special state fund, Federal trust funds, and University income


[^1]: **Appropriated funds** are authorized and granted by the State Legislature and are approved by the Governor. 
[^2]: **Non-appropriated funds** are those that are not appropriated by the state of Illinois. The budget for expenditure of non-appropriated funds is, however, approved by the Board of Trustees.




# Gathering Data
#### Request Data
- FF uses data through the IOCâ€™s Freedom of Information Officer (FOIA).
- A RA has to request data after the lapse period ends
	1. Ask lapse period is fully ended to the IOC
        - The lapse period ended on August 31, but may remain opened for error corrections and late billings.
        - I used the function at the website: [Contact Us: Send Us a Message](https://office.illinoiscomptroller.gov/sendusmessage/index.cfm)
    - Template for request:Â _==Link will be added==_
- Data will be separated intoÂ **Expenditure**Â andÂ **Revenue**Â in MS-Excel files


# Wrangling Data

>[! Generated Files]-
>0. Raw data
>1. Raw Data after Consistency Process
>	- **`allrevfiles.xlsx`**,Â **`allexpfiles.xlsx`**Â : Raw data from IOC
>	- [**`funds_ab_in.xlsx`**](https://jahunlee.github.io/Fiscal-Futures/Manual_Draft#^dd03d9): Funds information used since 1998, created from FF
>		- contains all funds that have existed, their current status of existence, whether their numbers have been reused different purposes, and the new fund numbers each year by the IOC.
>	- **`ioc_source_type.xlsx`**Â : Source type information, created from FF
 >2. FF Data after Recoding Variables
 >	- `rev_allyears.csv`,Â `exp_allyears.csv`
 >		- initial combined data files, merged withÂ `funds_ab_in.xlsx`, andÂ `ioc_source_type.xlsx`
 >		- Cleaned version of data before aggregating totals or dropping observations not included in the FF fiscal gap calculation.
 >			- Contain all years in one file.
 >			- Funds and agencies should have numbers and consistent labels.
 >			- Includes the â€œGroupâ€ variable used in the FF Annual Report used for calculating expenditures by function.Â 
 >	- `rev_temp.csv`,Â `exp_temp.csv`: Data prepared for the FF annual report
 >		- Data is cleaned and coded up to the point right before aggregating category totals.
 >		- Drops observations we do not keep in fiscal gap calculation.
 > 3. Final Outputs for Reporting
 >	- ~~`summary_file_FY20XX.xlsx`~~

### 1. Data Integration and Consistency Check (`allrevfiles_<span class="cur-years"></span>.csv` and `allexpfiles_<span class="cur-years"></span>.csv`)
Usually, the raw data from the IOC is inconsistent with past years. 
Therefore, make sure that the data consistency, through the following process:

1. Check any new agencies, re-used funds, etc. 
	- Create a list of funds, fund names, agencies, etc. for comparison between new year and prior year to identify new funds.
2. Update `funds_ab_in.xlsx`
	- `funds_ab_in.xlsx` shows the use of funds. 
	- Use criteria to determine if the new funds should be in or out of the all-funds frame.
3. Change the variable names to consistent with other files
	- ==Code Link==
4. Combine past data with the newest data.
5. Generate `allrevfiles_<span class="cur-years"></span>.csv` and `allexpfiles_<span class="cur-years"></span>.csv` <script>
  const curYear = new Date().getFullYear();  document.querySelectorAll('.cur-years').forEach(el => el.textContent = curYear); </script>


### 2. Recoding data
#### 2.1. Recoding New and Reused Funds


#### 2.2. Categorization 
==I plan to make a table or visualization for categorization==
##### 2.2.1. Expenditure
In the Fiscal Futures (FF) project, the expenditures of the State of Illinois are classified by policy domain. The expenditure categories are organized into three types:
- **Single Agency**: In most cases, the expenditure category corresponds directly to the name of a single bureau such as a _department_, _agency_, _branch_, _board_, or _commission_.
>[!Single Agency]-
>- 402.Â  Aging, Department of
>- 406.Â  Agriculture, Department of (includes: 538. Farm Development Authority; 556 Rural Bond Bank â€“ old agencies)
>- 418.Â  Children and Family Services, Department of
>- 420.Â  Commerce and Economic Opportunity,Â Department of
>- 422.Â  Natural Resources, Department of
>- 425.  Juvenile Justice,Â Department of
>- 426.Â  Corrections, Department of
>- 427.Â  Employment Security, Department of
>- 444.Â  Human Services, Department of
>- 478.Â  Healthcare & Family Services, Department of (net of 945. Medicaid)
>- 482.Â  Public Health, Department of
>- 492.Â  Revenue, Department of
>- 494.Â  TransportationÂ (net Local Share)â€“ e.g.Â public transportation, railroads, construction, equipment, maintenance
>- 532.Â  Environmental Protect AgencyÂ â€“ e.g.Â Air pollution control, land pollution control, clean water programs, stormwater management.
>- 557.Â  Illinois State Toll Highway AuthorityÂ â€“ e.g.Â Â tollway capital Improvement, maintenance. Principal and interest are included as Tollway expenditures since they are combined in the data.
>- 684.Â  Illinois Community College Board
>- 691.Â  Illinois Student Assistance Commission

- **Quasi-Agency**: Refers to categories that combine expenditures from multiple related agencies or programs that operate under shared policy functions.
>[!Quasi-Agency]-
>- ~~901. Pension contribution~~
>- 903. Debt Service
>- 904. State Employee Health Care
>- 945. Medicaid
>- 970. Transfer of Revenue to Local Governments

- **Combination of Small Agencies**: aggregated expenditures from several small agencies that are too minor to be analyzed individually.
>[!Combination of Small Agencies]-
>- **943. Central Services**
>- **910.Â Â Â Â Â Â  Legislative**
>- **920.Â Â Â Â Â Â  Judicial**
>- **930.Â Â Â Â Â Â  Elected Officers**
>- **941.Â Â Â Â Â Â  Public Safety**
>- **944.Â Â Â Â Â Â  Business & Professional Regulation**.
>- **946.Â Â Â Â Â Â  Capital Improvement**.
>- **948.Â Â Â Â Â Â  Other Departments**.
>- **949.Â Â Â Â Â Â  Other Boards & Commissions**.
>- **959. K-12 Education**
>- **960.Â University Education.**

##### 2.2.2. Revenue
Revenue categories are aggregated under the following revenue type codes.
- **02.Â  Individual Income Taxes**.Â 
    - Gross of local share.Â 
    - Excludes funds allocated to Income Tax Refund Fund (0278) and the Protest Fund.
- **03.Â  Corporate Income Taxes**
    - Gross of the personal property replacement tax levied on businesses.Â 
    - Excludes funds allocated to Income Tax Refund Fund (0278).
- **06.Â  Sales Taxes**
    - Collections of the general sales and use tax at the 6.25 percent rateâ€”1.25 of which is remitted to local governments and 5.00 of which is retained by the state.Â 
    - The Fiscal Futures project does not include the collections at the 1.0 percent rate that applies only to food and drugs and goes to local governments (deposited in the State and Local Sales Tax Reform Fund).
- **09.Â  Motor Fuel Tax**.Â 
    - Gross of the portion transferred to local governments.Â 
    - Net of current-year expenditures for refunds.Â 
- **12.Â  Public Utility Taxes**.Â 
    - Gross of the Personal Property Replacement Tax on public utilities that is transferred to local governments.Â 
- **15.Â  Cigarette Taxes**.Â 
- **18.Â  Liquor Gallonage Taxes**.Â 
- **21.Â  Inheritance Tax**: Net of current-year expenditures for refunds.
- **24.Â  Insurance Taxes, Fees & Licenses**: Net of current-year expenditures for refunds.
- **27.Â  Corporate Franchise Taxes & Fees**     
- **31.Â  Medical Provider Assessments**    
- **33.Â  Lottery Receipts**    
- **35.Â  Other Taxes**    
- **36.Â  Receipts From Revenue Producing**    
- **39.Â  Licenses, Fees & Registrations**    
- **42.Â  Motor Vehicle & Operators**Â     
- **48.Â  Riverboat Wagering Taxes**Â     
- **54.Â  Gifts and Bequests**Â     
- **78.Â  All Other Sources**: include the following smaller sources
        - 30.Â  Horse Racing Taxes & Fees.Â 
        - 60.Â  Other Grants and Contracts.Â 
        - 63.Â  Investment Income.Â 
- **58.Â  Federal Medicaid**:  federal receipts of the Department of Healthcare and Family Services (agency 478) attributable to Medicaid. 
	`agency = 478 & source =Â 0618,Â 2364,Â 0660,Â 1552,Â 2306,Â 2076,Â 0676, 0692`
- **59.Â  Federal Transportation**: Federal receipts of the Department of Transportation (`agency=494`)
- **57.Â  Federal Other**:Â All federal sources except for above two categories (`rev_type = 57`)

##### 2.2.3. Exclusion
- 32.Â Garnishment-Levies: (State is fiduciary, not beneficiary)
- 45.Â Student Fees-Universities: (Excluded from state-level budget)
- 51.Â Retirement Contributions (of individuals and non-state entities)
- 66.Â Proceeds, Investment Maturities: (Not sustainable flow)
- 72.Â Bond Issue ProceedsÂ : (Not sustainable flow)
- 75.Â Inter-Agency Receipts
- 79.Â Cook County Intergovernmental Transfers: (State is not beneficiary)
- 98.Â Prior Year Refunds
- 99. Statutory Transfers



# Reporting

1. Wide version:
	- `exp_fy20**_recoded.csv`, `rev_fy20**_recoded.csv` : Data from FY1998 after data processing
	- [`[View codeðŸ”—]`](https://github.com/jahunlee/Fiscal-Futures/blob/5291c2791984b1819f938ef2e7a31b3f04c1bbd2/Files/Everything.qmd#L885-L886)


2. Long version: 
	-  `expenditures_recoded_long2024.csv`, `revenue_recoded_long2024.csv` : Data from FY1998 after data processing, pivoted to a long format containing fiscal year, category, and dollar amounts.
	- [`[View codeðŸ”—]`](https://github.com/jahunlee/Fiscal-Futures/blob/5291c2791984b1819f938ef2e7a31b3f04c1bbd2/Files/Everything.qmd#L901-L1172)


3. Final summary:`summary_file_FY24_wTotals_2025_02_06.xlsx` : [`[View codeðŸ”—]`](https://github.com/jahunlee/Fiscal-Futures/blob/5291c2791984b1819f938ef2e7a31b3f04c1bbd2/Files/Everything.qmd#L2247-L2279)
    - Final summary workbook containing following sheets:
	    - Table 1 (Main Revenues): Top 10 categories, 1-year change, <span class="years"></span>-year CAGR
	    - Table 2 (Main Expenditures): Top 13 categories, 1-year change, <span class="years"></span>-year CAGR 
	    - Appendix 1. AllCats: All revenue categoriesâ€”1-year change table, with <span class="years"></span>-year CAGR
	    - Appendix 2. AllCats: All expenditure categoriesâ€”1-year change table, with <span class="years"></span>-year CAGR
	    - CAGR Rev-MajorCats: Major revenue categoriesâ€”1Â·2Â·3Â·5Â·10Â·<span class="years"></span>-year CAGR summary
	    - CAGR Exp-MajorCats: Major expenditure categoriesâ€”1Â·2Â·3Â·5Â·10Â·<span class="years"></span>-year CAGR summary
	    - Fiscal Gap: Yearly total revenues, total expenditures, and fiscal gap
	    - aggregated_totals_long: Long format data from FY1998
	
	<script>
	  const diff = new Date().getFullYear() - 1998;
	  document.querySelectorAll('.years').forEach(el => el.textContent = diff);
	</script>
  

- **Calulating**

1. Calculating the Fiscal Gap [`[View codeðŸ”—]`](https://github.com/jahunlee/Fiscal-Futures/blob/5291c2791984b1819f938ef2e7a31b3f04c1bbd2/Files/Everything.qmd#L1183-L1327)
2. Pension Costs Included within Department Expenditures
3. Illinois State Budget Data
4. Own Source Revenue
5. Federal Revenue
6. Local Transfers
7. Medicaid
8. Debt Service Discussion
9. Pensions
10. State Employee Healthcare Discussion
11. Tax Refunds
12. K-12 Spending & ESSER Funds
13. Federal COVID Money Received
